# -*- coding: utf-8 -*-
"""
    blackbot.bot
    ~~~~~~~~~~~

    :copyright: (c) 2014 by Taehoon Kim.
    :license: BSD, see LICENSE for more details.
"""

import requests

from talk import Talk
from line import LineClient

class Black(object):
    prefix  = "!"

    name    = "검정봇"
    creator = "carpedm20"

    def __init__(self, id=None, password=None, authToken=None):
        if not (id and None or authToken):
            msg = "`id` and `password` or `authToken` is needed"
            raise Exception(msg)

        self._session = requests.Session()
        self.talk     = Talk(self._session, name, creator)

        self.id       = id
        self.password = password

        if authToken:
            self.line = LineClient(authToken=authToken)
        else:
            self.line = LineClient(self.id, self.password)

    def run(self):
        ops = []

        for op in self.line.longPoll():
            ops.append(op)

        for op in ops:
            sender  = op[0]
            message = op[1]

            try:
                if message.text[0] == self.prefix:

            except Exception as e:
                raise Exception(e)

    def run_cmd(self):
        self.talk.cmdloop()
